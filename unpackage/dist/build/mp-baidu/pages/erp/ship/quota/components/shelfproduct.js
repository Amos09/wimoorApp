"use strict";var e=require("../../../../../common/vendor.js"),t=require("../../../../../api/erp/ship/quotaApi.js");require("../../../../../common/request.js");const i={props:["item","isAssemblyItem"],data:()=>({current:-1,offShelfNum:-1,shelfListData:[],shipmentid:"",createdate:"-",auditime:"-",shelfid:"",active:2,warehouseList:[{title:"暂无数据",desc:"发货仓库"},{title:"暂无数据",desc:"目的仓库"}],productListData:[],quotaoderData:{}}),onLoad(e){this.offShelfNum=-1},methods:{getChecked(e,t){return-1==this.current&&(t.forEach(((e,t)=>{e.quantity>0&&(this.current=t,this.shelfid=e.shelfid)})),-1==this.current&&(this.current=0,this.shelfid=t[0].shelfid)),this.current==e},goMaterialInfoPage(t){e.index.navigateTo({url:"../../material/material?materialid="+t})},needshow(e){if(e&&e.length>0)for(let t=0;t<e.length;t++)if(e[t]&&e[t].quantity>0)return!0;return!1},getoffShelfNum(e,t){let i=0;return t.forEach(((t,n)=>{if(this.current==n){if(e<=parseInt(t.quantity))return void(i=e);i=parseInt(t.quantity)}})),-1==this.offShelfNum&&(this.offShelfNum=i),console.log("getoffShelfNum",this.offShelfNum,i),i},getshelfid:(e,t)=>e,maxShelfNum(e){let t=0;return e.forEach(((e,i)=>{this.current==i&&(t=e.quantity?parseInt(e.quantity):0)})),t},subShelfNum(i){let n=[],s={},a=i[this.current];s.materialid=a.materialid,s.shelfid=a.shelfid,s.quantity=this.offShelfNum,s.opt=0,n.push(s);let m=this;t.quotaApi.subShelfInventory(n).then((t=>{e.index.showToast({title:"下架成功！",icon:"none",duration:2e3});let n=i[m.current];n.quantity=n.quantity-m.offShelfNum}))},offshelfValChange(e){this.offShelfNum=e},radioChange(e){this.current=e.detail.value}}};if(!Array){(e.resolveComponent("uni-th")+e.resolveComponent("uni-tr")+e.resolveComponent("uni-td")+e.resolveComponent("uni-table")+e.resolveComponent("uni-number-box"))()}Math||((()=>"../../../../../uni_modules/uni-table/components/uni-th/uni-th.js")+(()=>"../../../../../uni_modules/uni-table/components/uni-tr/uni-tr.js")+(()=>"../../../../../uni_modules/uni-table/components/uni-td/uni-td.js")+(()=>"../../../../../uni_modules/uni-table/components/uni-table/uni-table.js")+(()=>"../../../../../uni_modules/uni-number-box/components/uni-number-box/uni-number-box.js"))();var n=e._export_sfc(i,[["render",function(t,i,n,s,a,m){return e.e({a:e.o((e=>m.goMaterialInfoPage(n.item.materialid))),b:n.item.image,c:0==n.isAssemblyItem},0==n.isAssemblyItem?{d:e.t(n.item.name)}:{e:e.t(n.item.mname)},{f:e.t(n.item.sku),g:0==n.isAssemblyItem},0==n.isAssemblyItem?{h:e.t(n.item.sellersku)}:{},{i:0==n.isAssemblyItem},0==n.isAssemblyItem?{j:e.t(n.item.fnsku)}:{},{k:e.t(n.item.boxnum),l:n.item.boxlength},n.item.boxlength?{m:e.t(n.item.boxlength),n:e.t(n.item.boxwidth),o:e.t(n.item.boxheight)}:{},{p:n.item.boxweight},n.item.boxweight?{q:e.t(n.item.boxweight)}:{},{r:m.needshow(n.item.shelfInvList)},m.needshow(n.item.shelfInvList)?{s:e.p({align:"left",width:"10"}),t:e.p({align:"left",width:"190"}),v:e.p({align:"left",width:"50"}),w:e.f(n.item.shelfInvList,((t,i,s)=>({a:i,b:i,c:m.getChecked(i,n.item.shelfInvList),d:"6f0f3faa-6-"+s+",6f0f3faa-5-"+s,e:e.t(t.shelfname),f:"6f0f3faa-7-"+s+",6f0f3faa-5-"+s,g:e.t(t.quantity),h:"6f0f3faa-8-"+s+",6f0f3faa-5-"+s,i:"6f0f3faa-5-"+s+",6f0f3faa-0"}))),x:e.p({border:!0,emptyText:"暂无数据"}),y:e.o(((...e)=>m.radioChange&&m.radioChange(...e)))}:{},{z:e.t(n.item.quantity),A:0==n.isAssemblyItem},(n.isAssemblyItem,{}),{B:0==n.isAssemblyItem},0==n.isAssemblyItem?{C:e.t(n.item.invquantity)}:{D:e.t(n.item.fulfillable)},{E:m.needshow(n.item.shelfInvList)},m.needshow(n.item.shelfInvList)?{F:{change:e.o(m.offshelfValChange)},G:e.p({min:0,max:m.maxShelfNum(n.item.shelfInvList),value:m.getoffShelfNum(n.item.quantity,n.item.shelfInvList)}),H:e.o((()=>m.subShelfNum(n.item.shelfInvList)))}:{})}]]);swan.createComponent(n);
