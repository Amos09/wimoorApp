"use strict";var e=require("../../../common/vendor.js"),s=require("../../../api/sys/login.js");require("../../../common/request.js");const r={data:()=>({username:"",password:"",ftype:""}),onLoad(e){const s=e.ftype||e.payload;try{this.ftype=decodeURIComponent(s)}catch(r){this.ftype=""}},methods:{userValid(){var r={openid:e.index.getStorageSync("openid"),email:this.username,password:this.password};r.jsessionid=e.index.getStorageSync("JSessionId"),s.loginApi.verifyWechatApp(r).then((s=>{if(s){let r=s.jsessionid;e.index.setStorageSync("JSessionId",r),e.index.setStorageSync("currentuser",s.currentuser),e.index.switchTab({url:"/pages/tabBar/erp/erp"})}else e.index.showToast({icon:"none",title:"请输入正确的账号或密码！",duration:2e3})}))}}};var t=e._export_sfc(r,[["render",function(s,r,t,a,n,o){return{a:n.username,b:e.o((e=>n.username=e.detail.value)),c:n.password,d:e.o((e=>n.password=e.detail.value)),e:e.o(((...e)=>o.userValid&&o.userValid(...e)))}}]]);swan.createPage(t);
