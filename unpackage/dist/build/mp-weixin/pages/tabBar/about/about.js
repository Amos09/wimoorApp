"use strict";const e=require("../../../common/vendor.js"),t=require("../../../api/sys/login.js"),n=require("../../../store/index.js");require("../../../utils/request.js");const s={data:()=>({placeholderStyle:"color:#757575;font-size:14px",styles:{color:"#000",borderColor:"#747474"},type:"center",tableData:[],curuser:{account:""}}),onShow(){this.getOpenUserlist()},methods:{getOpenUserlist(){var e=this,s=n.store.state.openid;t.loginApi.getOpenUserlist({openid:s,appType:t.loginApi.getAppType()}).then((t=>{e.tableData=t,e.curuser=n.store.state.currentUser}))},unbindAccount(s){let o=this;e.index.showModal({title:"提示",content:"解绑后需重新绑定,确认解除吗？",success:function(i){if(i.confirm){var r=n.store.state.openid;t.loginApi.unbindWechat({appType:t.loginApi.getAppType(),account:s,openid:r}).then((t=>{1==t.isOk?(e.index.showToast({title:t.msg,icon:"none",duration:2e3}),o.curuser.account==s?(o.tableData=[],o.getOpenUserlist(),n.store.commit("setSessionid",null),n.store.commit("setCurrentUser",null),n.store.commit("setUserList",null),e.index.navigateTo({url:"/pages/sys/validate/index"})):(o.tableData=[],o.getOpenUserlist())):e.index.showToast({title:t.msg,icon:"none",duration:2e3})}))}}})},changeAccount(s){let o=this;var i=this.$store.state.openid,r=this.$store.state.sessionid;t.loginApi.changeLoginWechatApp({openid:i,account:s,jsessionid:r,appType:t.loginApi.getAppType()}).then((t=>{t&&(e.index.showToast({icon:"none",duration:2e3,title:"切换账号成功！"}),n.store.commit("setSessionid",r),n.store.commit("setCurrentUser",t.currentuser),o.curuser=t.currentuser,o.getOpenUserlist())}))},goValidatePage(){e.index.navigateTo({url:"/pages/sys/validate/index?ftype=app"})}}};if(!Array){(e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list")+e.resolveComponent("uni-card"))()}Math||((()=>"../../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../../uni_modules/uni-card/components/uni-card/uni-card.js"))();const o=e._export_sfc(s,[["render",function(t,n,s,o,i,r){return e.e({a:i.curuser.account},i.curuser.account?{b:e.t(i.curuser.account)}:{},{c:i.tableData.length>0},i.tableData.length>0?{d:e.f(i.tableData,((t,n,s)=>e.e({a:e.t(t.account),b:e.o((e=>r.unbindAccount(t.account))),c:i.curuser.account!=t.account},i.curuser.account!=t.account?{d:e.o((e=>r.changeAccount(t.account)))}:{},{e:n,f:"a9414ecc-3-"+s+",a9414ecc-1"}))),e:e.p({width:t.nvueWidth})}:{},{f:e.o((e=>r.goValidatePage()))})}]]);wx.createPage(o);
