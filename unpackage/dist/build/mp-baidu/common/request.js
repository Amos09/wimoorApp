"use strict";var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,r)=>{for(var i in r||(r={}))a.call(r,i)&&n(e,i,r[i]);if(t)for(var i of t(r))o.call(r,i)&&n(e,i,r[i]);return e},i=require("./vendor.js");exports.request=function(e={url:"",method:"GET",data:{},header:{}}){return new Promise(((t,a)=>{i.index.request({url:"https://api.wimoor.com"+e.url,method:e.method,header:r({"content-type":"application/json",JSessionId:i.index.getStorageSync("JSessionId")},e.header),data:e.data,success:a=>{a.data&&"201"==a.data.code?t(a.data.data):a.data&&"B0001"==a.data.code?i.index.showToast({title:a.data.msg,duration:2e3,icon:"none"}):a.data&&"401"==a.data.code?(i.index.clearStorageSync(),i.index.navigateTo({url:"/pages/sys/validate/index"})):"500"==a.statusCode&&"500"==a.data.status?i.index.showToast({title:"系统出错了,请联系管理员！",duration:2e3,icon:"none"}):"500"==a.status?i.index.showToast({title:"系统无法正常请求,请联系管理员！",duration:2e3,icon:"none"}):"400"==a.statusCode?i.index.showToast({title:"系统出错了,请联系管理员！",duration:2e3,icon:"none"}):("/auth/verifyWechatApp"!=e.url&&i.index.navigateTo({url:"/pages/sys/validate/index"}),t(a.data))},fail:e=>{i.index.showToast({title:"系统出错了,请联系管理员！",duration:2e3,icon:"none"})}})}))};
