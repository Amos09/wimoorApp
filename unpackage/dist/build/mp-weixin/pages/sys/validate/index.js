"use strict";const e=require("../../../common/vendor.js"),s=require("../../../api/sys/login.js"),t=require("../../../store/index.js");require("../../../utils/request.js");const i={data:()=>({username:"",password:"",ftype:""}),onLoad(e){const s=e.ftype||e.payload;try{this.ftype=decodeURIComponent(s)}catch(t){this.ftype=""}},methods:{userValid(){var i=this.$store.state.openid,o=this.$store.state.sessionid,r={openid:i,email:this.username,password:this.password};r.jsessionid=o,r.appType=s.loginApi.getAppType(),s.loginApi.verifyWechatApp(r).then((s=>{if("A0210"==s.code)e.index.showToast({icon:"none",title:s.msg,duration:2e3});else if(s){let i=s.jsessionid;t.store.commit("setSessionid",i),t.store.commit("setCurrentUser",s.currentuser),e.index.switchTab({url:"/pages/tabBar/main/index"})}else e.index.showToast({icon:"none",title:"请输入正确的账号或密码！",duration:2e3})}))}}};const o=e._export_sfc(i,[["render",function(s,t,i,o,r,n){return{a:r.username,b:e.o((e=>r.username=e.detail.value)),c:r.password,d:e.o((e=>r.password=e.detail.value)),e:e.o(((...e)=>n.userValid&&n.userValid(...e)))}}]]);wx.createPage(o);
